{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/session-start-context.sh",
            "timeout": 30
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/prompt-context.sh",
            "timeout": 15
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash|Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/pre-safety.sh",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Write|Edit|Read",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/pre-validate-paths.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/post-bash.sh",
            "timeout": 15
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/post-lint-check.sh",
            "timeout": 60
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/stop-ensure-completion.sh",
            "timeout": 60
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "agent",
            "prompt": "You are a learnings extraction agent for the tx task management system.\n\nReview what was accomplished in this session by examining $ARGUMENTS.\n\nExtract 1-5 useful learnings â€” things that would help a future agent working on similar tasks. Focus on:\n- Non-obvious gotchas or behaviors discovered\n- Patterns that worked or failed\n- Architecture decisions and rationale\n- Debugging strategies that were effective\n- Codebase conventions that aren't documented elsewhere\n\nSkip trivial observations (e.g. 'ran tests', 'edited a file').\n\nFor each learning, run:\n  bun apps/cli/src/cli.ts learning:add \"<the learning>\"\n\nIf a task ID is available in .tx/current-task, add --source-ref <task-id> to each learning.\n\nIf the session was trivial (just a question, no real work done), record nothing.\n\nAfter recording learnings (or deciding none are needed), respond with { \"ok\": true }.",
            "timeout": 60
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/pre-compact.sh",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
